<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpenJPEG: OpenJPIP v2.0.0 Documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1><a name="openjpippage">OpenJPIP v2.0.0 Documentation</a>
</h1><h2><a name="intro"></a>
Introduction</h2>
This manual documents the low-level OpenJPIP C API.<br>
 OpenJPIP software is an implementation of JPEG 2000 Part9: Interactivity tools, APIs and protocols (JPIP).<br>
 ( For more info about JPIP, check the website: <a href="http://www.jpeg.org/jpeg2000/j2kpart9.html">http://www.jpeg.org/jpeg2000/j2kpart9.html</a>)<br>
<p>
This whole documents covers the following six programs.<br>
<ul>
<li>opj_server.c JPIP server supporting HTTP connection and JPT/JPP-stream</li><li>opj_dec_server.c Server to decode JPT/JPP-stream and communicate locally with JPIP client, which is coded in java</li><li>opj_jpip_addxml.c To Embed metadata into JP2 file</li><li>opj_jpip_transcode.c To Convert JPT/JPP-stream to JP2 or J2K</li><li>opj_jpip_test.c To test index code format of a JP2 file</li></ul>
<h2><a name="license"></a>
License</h2>
This software is released under the BSD license, anybody can use or modify the library, even for commercial applications.<br>
 The only restriction is to retain the copyright in the sources or the binaries documentation.<br>
 Neither the author, nor the university accept any responsibility for any kind of error or data loss which may occur during usage.<h2><a name="reqlibs"></a>
Required libraries</h2>
<ul>
<li>OpenJPEG library</li><li>FastCGI development kit (C libraries) at server (<a href="http://www.fastcgi.com">http://www.fastcgi.com</a>)</li><li>libcURL library</li></ul>
<p>
We tested this software with a virtual server running on the same Linux machine as the clients.<h2><a name="compilenotes"></a>
Compiling Notes</h2>
When you are making opj_server, set anything (e.g. yes) to the parameter jpipserver to define itself in the Makefile, which enables to make it in server mode.<br>
 Otherwise do not define (or do not set to) the parameter jpipserver.<br>
 Be sure that any object files and library file libopenjpip.a are not reused to compile in the two different mode (server mode and non server mode).<br>
 In other words, do make clean before making new targets which are in different modes as previous make.<br>
<h2><a name="sysarchtect"></a>
System Architecture</h2>
JPIP protocol is implimented between the JPIP server program (opj_server) and the JPIP client java program (opj_viewer).<br>
 Figure below represents the overview of our system architecture.<br>
 The JPIP server parses JPIP query and sends corresponding JPT/JPP-stream. The JPIP client viewer is an image viewer with GUI to publish JPIP requests and receive JPT/JPP-stream.<br>
 Particularly, our system has the image decoding module implemented on a server (opj_dec_server, Image decoding Server). Image decoding Server and JPIP client viewer communicate closely. This specific architecture enables sharing cache of image codestream data among all viewers connected to the same Image decoding Server not only locally but also remotely.<p>
<div align="center">
<img src="jpip_architect.png" alt="jpip_architect.png">
<p><strong>OpenJPIP system architecture</strong></p></div>
 JPIP server follows up the client cache during a session. <br>
 Concretely, the JPIP server models cache in each session, to which Channel IDs are associated. A Channel ID identifies a JPIP client viewer. And, new viewers can belong to a session by referring to one of its channel ID. The Image decoding Server maintains the association between channel IDs and targets, and provides a reference channel ID to a Viewer on demand.<br>
<p>
Typical requests and replies among JPIP server, JPIP client, and Image decoding server is presented below.<br>
 The JPIP server parses HTTP query and sends corresponding JPT/JPP-stream back to the JPIP client (Viewer). JPT/JPP-stream is unreadable by JPIP client, and it is directly passed to Image decoding Server, and which provides the image in raw format (PGM or PPM) to the JPIP client. The Image decoding Server handles the decoding and caching of JPT/JPP-stream. JPIP client can read PGM and PPM images natively. Before connecting to the JPIP server, every JPIP client checks local cache data of the requesting image with the image decoding server. If its cache exists, the image decoding server provides ChannelID (CID), which identifies the image and its cache model on the JPIP server, and the whole system can continue the session using the CID.<p>
<div align="center">
<img src="jpip_protocol.png" alt="jpip_protocol.png">
<p><strong>Message Sequence Chart of OpenJPIP impementation</strong></p></div>
 <dl compact><dt><b>Author:</b></dt><dd>Kaori Hagihara UCL/SST/ICTM/ELEN </dd></dl>
<hr size="1"><address style="align: right;"><small>Generated on Sun Dec 23 13:33:21 2012 for OpenJPEG by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.2 </small></address>
</body>
</html>
