<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpenJPEG: openjpip.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>openjpip.h</h1><a href="openjpip_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> * $Id: openjpip_8h-source.html,v 1.2 2012/12/23 06:38:15 rudahl Exp $</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * Copyright (c) 2002-2011, Communications and Remote Sensing Laboratory, Universite catholique de Louvain (UCL), Belgium</span>
00005 <span class="comment"> * Copyright (c) 2002-2011, Professor Benoit Macq</span>
00006 <span class="comment"> * Copyright (c) 2010-2011, Kaori Hagihara</span>
00007 <span class="comment"> * All rights reserved.</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
00010 <span class="comment"> * modification, are permitted provided that the following conditions</span>
00011 <span class="comment"> * are met:</span>
00012 <span class="comment"> * 1. Redistributions of source code must retain the above copyright</span>
00013 <span class="comment"> *    notice, this list of conditions and the following disclaimer.</span>
00014 <span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span>
00015 <span class="comment"> *    notice, this list of conditions and the following disclaimer in the</span>
00016 <span class="comment"> *    documentation and/or other materials provided with the distribution.</span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS `AS IS'</span>
00019 <span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
00020 <span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
00021 <span class="comment"> * ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE</span>
00022 <span class="comment"> * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span>
00023 <span class="comment"> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span>
00024 <span class="comment"> * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span>
00025 <span class="comment"> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span>
00026 <span class="comment"> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span>
00027 <span class="comment"> * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
00028 <span class="comment"> * POSSIBILITY OF SUCH DAMAGE.</span>
00029 <span class="comment"> */</span>
00030 
00031 <span class="preprocessor">#ifndef         OPENJPIP_H_</span>
00032 <span class="preprocessor"></span><span class="preprocessor"># define        OPENJPIP_H_</span>
00033 <span class="preprocessor"></span>
00034 <span class="preprocessor">#include "<a class="code" href="session__manager_8h.html">session_manager.h</a>"</span>
00035 <span class="preprocessor">#include "<a class="code" href="target__manager_8h.html">target_manager.h</a>"</span>
00036 <span class="preprocessor">#include "<a class="code" href="query__parser_8h.html">query_parser.h</a>"</span>
00037 <span class="preprocessor">#include "<a class="code" href="msgqueue__manager_8h.html">msgqueue_manager.h</a>"</span>
00038 <span class="preprocessor">#include "<a class="code" href="sock__manager_8h.html">sock_manager.h</a>"</span>
00039 <span class="preprocessor">#include "<a class="code" href="auxtrans__manager_8h.html">auxtrans_manager.h</a>"</span>
00040 
00041 <span class="preprocessor">#ifdef SERVER</span>
00042 <span class="preprocessor"></span>
00043 <span class="preprocessor">#include "fcgi_stdio.h"</span>
00044 <span class="preprocessor">#define logstream FCGI_stdout</span>
00045 <span class="preprocessor"></span>
00046 <span class="preprocessor">#else</span>
00047 <span class="preprocessor"></span>
<a name="l00048"></a><a class="code" href="openjpip_8h.html#a0">00048</a> <span class="preprocessor">#define FCGI_stdout stdout</span>
<a name="l00049"></a><a class="code" href="openjpip_8h.html#a1">00049</a> <span class="preprocessor"></span><span class="preprocessor">#define FCGI_stderr stderr</span>
<a name="l00050"></a><a class="code" href="openjpip_8h.html#a2">00050</a> <span class="preprocessor"></span><span class="preprocessor">#define logstream stderr</span>
00051 <span class="preprocessor"></span>
00052 <span class="preprocessor">#include "<a class="code" href="cache__manager_8h.html">cache_manager.h</a>"</span>
00053 <span class="preprocessor">#include "<a class="code" href="byte__manager_8h.html">byte_manager.h</a>"</span>
00054 <span class="preprocessor">#include "<a class="code" href="imgsock__manager_8h.html">imgsock_manager.h</a>"</span>
00055 
00056 <span class="preprocessor">#include "<a class="code" href="metadata__manager_8h.html">metadata_manager.h</a>"</span>
00057 <span class="preprocessor">#include "<a class="code" href="ihdrbox__manager_8h.html">ihdrbox_manager.h</a>"</span>
00058 <span class="preprocessor">#include "<a class="code" href="index__manager_8h.html">index_manager.h</a>"</span>
00059 
00060 <span class="preprocessor">#endif </span><span class="comment">/*SERVER*/</span>
00061 
00062 <span class="comment">/* </span>
00063 <span class="comment"> *==========================================================</span>
00064 <span class="comment"> * JPIP server API</span>
00065 <span class="comment"> *==========================================================</span>
00066 <span class="comment"> */</span>
00067  
00068 <span class="preprocessor"> #ifdef SERVER</span>
00069 <span class="preprocessor"></span>
00071 <span class="keyword">typedef</span> <span class="keyword">struct </span>server_record{
00072   <a class="code" href="structsessionlist__param.html">sessionlist_param_t</a> *sessionlist; 
00073   <a class="code" href="structtargetlist__param.html">targetlist_param_t</a> *targetlist;   
00074   <a class="code" href="structauxtrans__param.html">auxtrans_param_t</a> auxtrans;
00075 } server_record_t;
00076 
00078 <span class="keyword">typedef</span> <span class="keyword">struct </span>QR{
00079   <a class="code" href="structquery__param.html">query_param_t</a> *query;             
00080   <a class="code" href="structmsgqueue__param.html">msgqueue_param_t</a> *msgqueue;       
00081   <a class="code" href="structchannel__param.html">channel_param_t</a> *channel;         
00082 } QR_t;
00083 
00091 server_record_t * init_JPIPserver( <span class="keywordtype">int</span> tcp_auxport, <span class="keywordtype">int</span> udp_auxport);
00092 
00098 <span class="keywordtype">void</span> terminate_JPIPserver( server_record_t **rec);
00099 
00106 QR_t * parse_querystring( <span class="keyword">const</span> <span class="keywordtype">char</span> *query_string);
00107 
00115 <a class="code" href="openjpeg_8h.html#a33">OPJ_BOOL</a> process_JPIPrequest( server_record_t *rec, QR_t *qr);
00116 
00123 <span class="keywordtype">void</span> send_responsedata( server_record_t *rec, QR_t *qr);
00124 
00131 <span class="keywordtype">void</span> end_QRprocess( server_record_t *rec, QR_t **qr);
00132 
00143 <span class="keywordtype">void</span> local_log( OPJ_BOOL query, OPJ_BOOL messages, OPJ_BOOL sessions, OPJ_BOOL targets, QR_t *qr, server_record_t *rec);
00144 
00145 <span class="preprocessor">#endif </span><span class="comment">/*SERVER*/</span>
00146 
00147 <span class="comment">/* </span>
00148 <span class="comment"> *==========================================================</span>
00149 <span class="comment"> *      JPIP decoding server API</span>
00150 <span class="comment"> *==========================================================</span>
00151 <span class="comment"> */</span>
00152 
00153 <span class="preprocessor">#ifndef SERVER</span>
00154 <span class="preprocessor"></span>
<a name="l00156"></a><a class="code" href="structdec__server__record.html">00156</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structdec__server__record.html">dec_server_record</a>{
<a name="l00157"></a><a class="code" href="structdec__server__record.html#o0">00157</a>   <a class="code" href="structcachelist__param.html">cachelist_param_t</a> *<a class="code" href="structdec__server__record.html#o0">cachelist</a>; 
<a name="l00158"></a><a class="code" href="structdec__server__record.html#o1">00158</a>   <a class="code" href="byte__manager_8h.html#a0">Byte_t</a> *<a class="code" href="structdec__server__record.html#o1">jpipstream</a>;           
<a name="l00159"></a><a class="code" href="structdec__server__record.html#o2">00159</a>   <a class="code" href="openjpeg_8h.html#a47">OPJ_SIZE_T</a> <a class="code" href="structdec__server__record.html#o2">jpipstreamlen</a>;            
<a name="l00160"></a><a class="code" href="structdec__server__record.html#o3">00160</a>   <a class="code" href="structmsgqueue__param.html">msgqueue_param_t</a> *<a class="code" href="structdec__server__record.html#o3">msgqueue</a>;   
<a name="l00161"></a><a class="code" href="structdec__server__record.html#o4">00161</a>   <a class="code" href="sock__manager_8h.html#a1">SOCKET</a> <a class="code" href="structdec__server__record.html#o4">listening_socket</a>;      
00162 } <a class="code" href="structdec__server__record.html">dec_server_record_t</a>;
00163 
00164 
<a name="l00166"></a><a class="code" href="openjpip_8h.html#a4">00166</a> <span class="keyword">typedef</span> <a class="code" href="sock__manager_8h.html#a1">SOCKET</a> <a class="code" href="openjpip_8h.html#a4">client_t</a>;
00167 
00174 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <a class="code" href="structdec__server__record.html">dec_server_record_t</a> * <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a0">init_dec_server</a>( <span class="keywordtype">int</span> port);
00175 
00181 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <span class="keywordtype">void</span> <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a1">terminate_dec_server</a>( <a class="code" href="structdec__server__record.html">dec_server_record_t</a> **rec);
00182 
00189 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <a class="code" href="openjpip_8h.html#a4">client_t</a> <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a2">accept_connection</a>( <a class="code" href="structdec__server__record.html">dec_server_record_t</a> *rec);
00190 
00198 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <a class="code" href="openjpeg_8h.html#a33">OPJ_BOOL</a> <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a3">handle_clientreq</a>( client_t client, <a class="code" href="structdec__server__record.html">dec_server_record_t</a> *rec);
00199 
00200 <span class="preprocessor">#endif </span><span class="comment">/*SERVER*/</span>
00201 
00202 <span class="comment">/* </span>
00203 <span class="comment"> *==========================================================</span>
00204 <span class="comment"> *     JPIP tool API</span>
00205 <span class="comment"> *==========================================================</span>
00206 <span class="comment"> */</span>
00207 
00208 <span class="preprocessor">#ifndef SERVER</span>
00209 <span class="preprocessor"></span>
00210 <span class="comment">/*</span>
00211 <span class="comment"> * jpip to JP2 or J2K</span>
00212 <span class="comment"> */</span>
00213 
<a name="l00215"></a><a class="code" href="structjpip__dec__param.html">00215</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structjpip__dec__param.html">jpip_dec_param</a>{
<a name="l00216"></a><a class="code" href="structjpip__dec__param.html#o0">00216</a>   <a class="code" href="byte__manager_8h.html#a0">Byte_t</a> *<a class="code" href="structjpip__dec__param.html#o0">jpipstream</a>;                 
<a name="l00217"></a><a class="code" href="structjpip__dec__param.html#o1">00217</a>   <a class="code" href="byte__manager_8h.html#a3">Byte8_t</a> <a class="code" href="structjpip__dec__param.html#o1">jpiplen</a>;                    
<a name="l00218"></a><a class="code" href="structjpip__dec__param.html#o2">00218</a>   <a class="code" href="structmsgqueue__param.html">msgqueue_param_t</a> *<a class="code" href="structjpip__dec__param.html#o2">msgqueue</a>;         
<a name="l00219"></a><a class="code" href="structjpip__dec__param.html#o3">00219</a>   <a class="code" href="structmetadatalist__param.html">metadatalist_param_t</a> *<a class="code" href="structjpip__dec__param.html#o3">metadatalist</a>; 
<a name="l00220"></a><a class="code" href="structjpip__dec__param.html#o4">00220</a>   <a class="code" href="structihdrbox__param.html">ihdrbox_param_t</a> *<a class="code" href="structjpip__dec__param.html#o4">ihdrbox</a>;           
<a name="l00221"></a><a class="code" href="structjpip__dec__param.html#o5">00221</a>   <a class="code" href="byte__manager_8h.html#a0">Byte_t</a> *<a class="code" href="structjpip__dec__param.html#o5">jp2kstream</a>;                 
<a name="l00222"></a><a class="code" href="structjpip__dec__param.html#o6">00222</a>   <a class="code" href="byte__manager_8h.html#a3">Byte8_t</a> <a class="code" href="structjpip__dec__param.html#o6">jp2klen</a>;                    
00223 } <a class="code" href="structjpip__dec__param.html">jpip_dec_param_t</a>;
00224 
00231 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <a class="code" href="structjpip__dec__param.html">jpip_dec_param_t</a> * <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a4">init_jpipdecoder</a>( OPJ_BOOL jp2);
00232 
00238 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <span class="keywordtype">void</span> <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a9">destroy_jpipdecoder</a>( <a class="code" href="structjpip__dec__param.html">jpip_dec_param_t</a> **dec);
00239 
00247 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <a class="code" href="openjpeg_8h.html#a33">OPJ_BOOL</a> <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a5">fread_jpip</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> fname[], <a class="code" href="structjpip__dec__param.html">jpip_dec_param_t</a> *dec);
00248 
00254 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <span class="keywordtype">void</span> <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a6">decode_jpip</a>( <a class="code" href="structjpip__dec__param.html">jpip_dec_param_t</a> *dec);
00255 
00263 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <a class="code" href="openjpeg_8h.html#a33">OPJ_BOOL</a> <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a7">fwrite_jp2k</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> fname[], <a class="code" href="structjpip__dec__param.html">jpip_dec_param_t</a> *dec);
00264 
00273 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <span class="keywordtype">void</span> <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a8">output_log</a>( OPJ_BOOL messages, OPJ_BOOL metadata, OPJ_BOOL ihdrbox, <a class="code" href="structjpip__dec__param.html">jpip_dec_param_t</a> *dec);
00274 
00275 <span class="comment">/*</span>
00276 <span class="comment"> *  test the format of index (cidx) box in JP2 file</span>
00277 <span class="comment"> */</span>
00278 
<a name="l00280"></a><a class="code" href="openjpip_8h.html#a6">00280</a> <span class="keyword">typedef</span> <a class="code" href="structindex__param.html">index_param_t</a> <a class="code" href="structindex__param.html">index_t</a>;
00281 
00288 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <a class="code" href="openjpip_8h.html#a6">index_t</a> * <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a10">get_index_from_JP2file</a>( <span class="keywordtype">int</span> fd);
00289 
00295 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <span class="keywordtype">void</span> <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a11">destroy_index</a>( index_t **idx);
00296 
00297 
00303 <a class="code" href="openjpeg_8h.html#a1">OPJ_API</a> <span class="keywordtype">void</span> <a class="code" href="openjpeg_8h.html#a3">OPJ_CALLCONV</a> <a class="code" href="openjpip_8c.html#a12">output_index</a>( index_t *index);
00304 
00305 <span class="preprocessor">#endif </span><span class="comment">/*SERVER*/</span>
00306 
00307 <span class="preprocessor">#endif </span><span class="comment">/* !OPENJPIP_H_ */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Dec 23 13:33:19 2012 for OpenJPEG by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.2 </small></address>
</body>
</html>
